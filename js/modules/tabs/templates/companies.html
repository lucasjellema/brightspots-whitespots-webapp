<div class="row mb-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>Companies</h5>
                <p class="text-muted">Select a company to view detailed information about their responses.</p>
            </div>
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="companySelector" class="form-label">Select a company:</label>
                            <select class="form-select" id="companySelector">
                                <option value="" selected>-- Select a company --</option>
                                <!-- Company options will be populated dynamically -->
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Company Details Section (hidden by default) -->
<div id="companyDetailsSection" class="row mb-4" style="display: none;">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5 id="companyName">Company Details</h5>
            </div>
            <div class="card-body">
                <!-- Contributors Section -->
                <div class="mb-4">
                    <h6>Contributors</h6>
                    <ul id="contributorsList" class="list-group">
                        <!-- Contributors will be populated dynamically -->
                    </ul>
                </div>

                <!-- Free Text Sections -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                Customer Themes
                            </div>
                            <div class="card-body">
                                <p id="customerThemesText" class="text-muted">No customer themes provided.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header">
                                Emerging Tech/Vendor/Product
                            </div>
                            <div class="card-body">
                                <p id="emergingTechText" class="text-muted">No emerging tech information provided.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Theme Assessment Section (Collapsible) -->
                <div id="themeAssessmentSection" class="mb-4" style="display: none;">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <!-- Separate the collapse toggle from the edit button to prevent conflicts -->
                            <div class="d-flex align-items-center" 
                                 data-bs-toggle="collapse" href="#themeAssessmentCollapse" role="button" 
                                 aria-expanded="false" aria-controls="themeAssessmentCollapse">
                                <h5 class="mb-0">
                                    Theme Assessments for Company
                                    <i id="themeAssessmentCollapseIcon" class="bi bi-chevron-down ms-2"></i>
                                </h5>
                            </div>
                            <!-- Edit button is now outside the collapsible area -->
                            <button id="editThemeAssessmentBtn" class="btn btn-outline-primary btn-sm">
                                <i class="bi bi-pencil"></i> Edit Assessment
                            </button>
                        </div>
                        <div class="collapse" id="themeAssessmentCollapse">
                            <div class="card-body p-2">
                                <div id="themeAssessmentSummary" class="table-responsive">
                                    <!-- Compact theme assessment summary will be populated here -->
                                    <div class="text-center text-muted py-2">
                                        <div class="spinner-border spinner-border-sm me-2" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        Loading themes...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                

                <!-- Challenges Section (Collapsible) -->
                <div class="mb-4">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <!-- Separate the collapse toggle from any potential buttons -->
                            <div class="d-flex align-items-center" 
                                 data-bs-toggle="collapse" href="#challengesCollapse" role="button" 
                                 aria-expanded="false" aria-controls="challengesCollapse">
                                <h5 class="mb-0">
                                    Identified Customer Challenges
                                    <i id="challengesCollapseIcon" class="bi bi-chevron-down ms-2"></i>
                                </h5>
                            </div>
                        </div>
                        <div class="collapse" id="challengesCollapse">
                            <div class="card-body p-2">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>Challenge</th>
                                                <th>Interest Level</th>
                                                <th class="actions-column" id="challengesActionsHeader">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="challengesTableBody">
                                            <!-- Challenges will be populated dynamically -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tech Concepts Section (Collapsible) -->
                <div class="mb-4">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <!-- Separate the collapse toggle from any potential buttons -->
                            <div class="d-flex align-items-center" 
                                 data-bs-toggle="collapse" href="#techConceptsCollapse" role="button" 
                                 aria-expanded="false" aria-controls="techConceptsCollapse">
                                <h5 class="mb-0">
                                    Spotted Upcoming Tech Concepts
                                    <i id="techConceptsCollapseIcon" class="bi bi-chevron-down ms-2"></i>
                                </h5>
                            </div>
                        </div>
                        <div class="collapse" id="techConceptsCollapse">
                            <div class="card-body p-2">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>Tech Concept</th>
                                                <th>Interest Level</th>
                                                <th class="actions-column" id="techConceptsActionsHeader">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="techConceptsTableBody">
                                            <!-- Tech concepts will be populated dynamically -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products/Vendors Section (Collapsible) -->
                <div class="mb-4">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <!-- Separate the collapse toggle from any potential buttons -->
                            <div class="d-flex align-items-center" 
                                 data-bs-toggle="collapse" href="#productsVendorsCollapse" role="button" 
                                 aria-expanded="false" aria-controls="productsVendorsCollapse">
                                <h5 class="mb-0">
                                    Observed Products & Vendors
                                    <i id="productsVendorsCollapseIcon" class="bi bi-chevron-down ms-2"></i>
                                </h5>
                            </div>
                        </div>
                        <div class="collapse" id="productsVendorsCollapse">
                            <div class="card-body p-2">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>Product/Vendor</th>
                                                <th>Interest Level</th>
                                                <th class="actions-column" id="productsVendorsActionsHeader">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="productsVendorsTableBody">
                                            <!-- Products/vendors will be populated dynamically -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
